import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  try {
    const { PrismaClient } = await import('@prisma/client')
    const prisma = new PrismaClient()

    // البيانات الأساسية للأنظمة - يمكن التعديل عليها من لوحة الإدارة
    const systemsData = [
      {
        name: 'نظام المحاسبة والفاتورة الإلكترونية',
        slug: 'accounting-electronic-invoice-system',
        description: 'نظام متكامل لإدارة الحسابات والفواتير الإلكترونية مع ربط هيئة الزكاة والضريبة والدعم الكامل للمعايير السعودية',
        shortDescription: 'نظام محاسبة متكامل مع فواتير إلكترونية معتمدة',
        category: 'مالي',
        features: [
          'فواتير إلكترونية معتمدة من هيئة الزكاة والضريبة',
          'ربط مباشر مع منصة فاتورة الحكومية',
          'تقارير مالية شاملة ومفصلة',
          'إدارة العملاء والموردين بالكامل',
          'نظام الخزينة والبنوك المتطور',
          'التكامل مع البنوك السعودية',
          'إدارة الأصول الثابتة',
          'نظام المراكز والمشاريع',
          'تقارير الزكاة والضريبة التلقائية',
          'دعم العملات المتعددة'
        ],
        specifications: {
          'نوع الترخيص': 'سحابي ومحلي',
          'عدد المستخدمين': 'غير محدود',
          'قواعد البيانات': 'SQL Server, MySQL, PostgreSQL',
          'أنظمة التشغيل': 'Windows, Linux, macOS',
          'المتصفحات المدعومة': 'جميع المتصفحات الحديثة',
          'التكامل': 'API متكامل',
          'النسخ الاحتياطي': 'تلقائي يومي',
          'الأمان': 'تشفير 256-bit SSL'
        },
        isActive: true,
        isFeatured: true,
        sortOrder: 1,
        seoTitle: 'نظام المحاسبة والفاتورة الإلكترونية - كوربريت ستاك',
        seoDescription: 'نظام محاسبة متكامل مع فواتير إلكترونية معتمدة من هيئة الزكاة والضريبة السعودية',
        seoKeywords: ['محاسبة', 'فاتورة إلكترونية', 'هيئة الزكاة', 'نظام مالي']
      },
      {
        name: 'نظام إدارة العملاء (CRM)',
        slug: 'crm-customer-management-system',
        description: 'نظام شامل لإدارة العلاقات مع العملاء وتتبع المبيعات والفرص التجارية مع أدوات تسويق متقدمة',
        shortDescription: 'نظام CRM متطور لإدارة العملاء والمبيعات',
        category: 'مبيعات',
        features: [
          'إدارة شاملة لجهات الاتصال والعملاء',
          'تتبع الفرص التجارية والصفقات',
          'تقارير المبيعات المتقدمة والتحليلات',
          'أتمتة التسويق والحملات الإعلانية',
          'إدارة خط المبيعات (Sales Pipeline)',
          'تحليلات العملاء والسلوك الشرائي',
          'نظام المهام والمتابعة',
          'التكامل مع البريد الإلكتروني',
          'تقارير الأداء والإنتاجية',
          'نظام التنبيهات والإشعارات'
        ],
        specifications: {
          'عدد العملاء': 'غير محدود',
          'التقارير': '50+ تقرير جاهز',
          'التكامل': 'البريد الإلكتروني، الهاتف، WhatsApp',
          'التطبيق المحمول': 'iOS و Android',
          'النسخ الاحتياطي': 'تلقائي كل 6 ساعات',
          'مستوى الأمان': 'عالي جداً',
          'الدعم الفني': '24/7',
          'التحديثات': 'مجانية مدى الحياة'
        },
        isActive: true,
        isFeatured: true,
        sortOrder: 2,
        seoTitle: 'نظام إدارة العملاء CRM - كوربريت ستاك',
        seoDescription: 'نظام CRM متطور لإدارة العملاء والمبيعات مع أدوات تسويق متقدمة',
        seoKeywords: ['CRM', 'إدارة العملاء', 'مبيعات', 'تسويق']
      },
      {
        name: 'نظام إدارة الموارد البشرية',
        slug: 'hr-human-resources-system',
        description: 'نظام متكامل لإدارة شؤون الموظفين والرواتب والحضور والانصراف مع نظام تقييم الأداء',
        shortDescription: 'نظام HR شامل لإدارة الموظفين والرواتب',
        category: 'موارد بشرية',
        features: [
          'إدارة شاملة لبيانات الموظفين',
          'نظام الرواتب والمكافآت المتطور',
          'الحضور والانصراف الإلكتروني',
          'تقييم الأداء والكفاءات',
          'إدارة الإجازات والطلبات',
          'التقارير الحكومية المطلوبة',
          'نظام التوظيف والمقابلات',
          'إدارة التدريب والتطوير',
          'نظام المخالفات والجزاءات',
          'تقارير الموارد البشرية التفصيلية'
        ],
        specifications: {
          'عدد الموظفين': 'غير محدود',
          'أنواع الرواتب': 'شهري، أسبوعي، يومي',
          'طرق الحضور': 'بصمة، كارت، تطبيق محمول',
          'التقارير الحكومية': 'GOSI، مكتب العمل، الزكاة',
          'العملات': 'ريال سعودي وعملات أخرى',
          'التكامل': 'البنوك، أجهزة البصمة',
          'الأمان': 'تشفير البيانات الشخصية',
          'النسخ الاحتياطي': 'يومي تلقائي'
        },
        isActive: true,
        isFeatured: true,
        sortOrder: 3,
        seoTitle: 'نظام إدارة الموارد البشرية HR - كوربريت ستاك',
        seoDescription: 'نظام HR متكامل لإدارة الموظفين والرواتب والحضور مع التقارير الحكومية',
        seoKeywords: ['موارد بشرية', 'HR', 'رواتب', 'حضور وانصراف']
      },
      {
        name: 'نظام إدارة المخزون',
        slug: 'inventory-management-system',
        description: 'نظام متطور لإدارة المخزون والمواد مع تتبع المستويات والتنبيهات التلقائية وإدارة المستودعات',
        shortDescription: 'نظام مخزون متطور مع تتبع فوري',
        category: 'مخزون',
        features: [
          'تتبع المخزون الفوري والدقيق',
          'إدارة المستودعات المتعددة',
          'تقارير الجرد التفصيلية والشاملة',
          'تنبيهات النفاد التلقائية',
          'إدارة الموردين والمشتريات',
          'نظام الباركود المتطور',
          'إدارة تواريخ الانتهاء',
          'تكلفة المخزون المتوسطة',
          'تقارير الحركة والدوران',
          'التكامل مع نقاط البيع'
        ],
        specifications: {
          'عدد الأصناف': 'غير محدود',
          'المستودعات': 'متعددة بلا حدود',
          'طرق التكلفة': 'FIFO، LIFO، المتوسط المرجح',
          'الباركود': 'دعم جميع الأنواع',
          'التقارير': '40+ تقرير مخزون',
          'التنبيهات': 'SMS، إيميل، داخل النظام',
          'التكامل': 'POS، محاسبة، مبيعات',
          'الجرد': 'دوري وفوري'
        },
        isActive: true,
        isFeatured: true,
        sortOrder: 4,
        seoTitle: 'نظام إدارة المخزون - كوربريت ستاك',
        seoDescription: 'نظام مخزون متطور مع تتبع فوري وتنبيهات تلقائية وإدارة مستودعات متعددة',
        seoKeywords: ['مخزون', 'مستودعات', 'جرد', 'باركود']
      },
      {
        name: 'نظام إدارة المشاريع',
        slug: 'project-management-system',
        description: 'نظام شامل لإدارة المشاريع وتتبع المهام والموارد مع أدوات التعاون والتقارير المتقدمة',
        shortDescription: 'نظام إدارة مشاريع متكامل مع أدوات التعاون',
        category: 'إدارة',
        features: [
          'إدارة المشاريع والمهام بالتفصيل',
          'تتبع الوقت والموارد المستخدمة',
          'أدوات التعاون الجماعي المتقدمة',
          'تقارير الأداء والإنجاز',
          'إدارة الميزانيات والتكاليف',
          'تقويم المشاريع والمواعيد',
          'إدارة الفرق والأعضاء',
          'تتبع التقدم والإنجاز',
          'نظام الوثائق والملفات',
          'تقارير الربحية والتحليل'
        ],
        specifications: {
          'عدد المشاريع': 'غير محدود',
          'أعضاء الفريق': 'غير محدود',
          'طرق العرض': 'Gantt، Kanban، Calendar',
          'التقارير': '30+ تقرير مشاريع',
          'التكامل': 'البريد، التقويم، المحاسبة',
          'التطبيق المحمول': 'iOS و Android',
          'التخزين': 'سحابي آمن',
          'النسخ الاحتياطي': 'تلقائي يومي'
        },
        isActive: true,
        isFeatured: false,
        sortOrder: 5,
        seoTitle: 'نظام إدارة المشاريع - كوربريت ستاك',
        seoDescription: 'نظام إدارة مشاريع شامل مع تتبع المهام والموارد وأدوات التعاون الجماعي',
        seoKeywords: ['إدارة مشاريع', 'مهام', 'فرق عمل', 'تعاون']
      },
      {
        name: 'نظام نقاط البيع (POS)',
        slug: 'pos-point-of-sale-system',
        description: 'نظام نقاط بيع متطور مع إدارة المبيعات والمخزون والعملاء وتقارير شاملة للمتاجر والمطاعم',
        shortDescription: 'نظام POS متكامل للمتاجر والمطاعم',
        category: 'مبيعات',
        features: [
          'واجهة بيع سهلة وسريعة',
          'إدارة المنتجات والأسعار',
          'نظام الخصومات والعروض',
          'تقارير المبيعات اليومية',
          'إدارة العملاء والنقاط',
          'ربط مع أجهزة الطباعة والدرج',
          'نظام الفواتير الإلكترونية',
          'تتبع المخزون الفوري',
          'تقارير الأرباح والخسائر',
          'دعم طرق الدفع المتعددة'
        ],
        specifications: {
          'أنواع الأعمال': 'متاجر، مطاعم، صيدليات، محلات',
          'طرق الدفع': 'نقدي، فيزا، ماستركارد، مدى، STC Pay',
          'الأجهزة المدعومة': 'طابعات، درج نقدي، قارئ باركود',
          'التقارير': '25+ تقرير مبيعات',
          'المنتجات': 'غير محدود',
          'الفروع': 'متعددة',
          'التطبيق المحمول': 'Android و iOS',
          'النسخ الاحتياطي': 'سحابي تلقائي'
        },
        isActive: true,
        isFeatured: true,
        sortOrder: 6,
        seoTitle: 'نظام نقاط البيع POS - كوربريت ستاك',
        seoDescription: 'نظام POS متطور للمتاجر والمطاعم مع إدارة المبيعات والمخزون والفواتير الإلكترونية',
        seoKeywords: ['نقاط البيع', 'POS', 'متاجر', 'مطاعم', 'كاشير']
      },
      {
        name: 'نظام إدارة المدارس',
        slug: 'school-management-system',
        description: 'نظام شامل لإدارة المدارس والطلاب والمعلمين مع نظام الدرجات والحضور والتواصل مع أولياء الأمور',
        shortDescription: 'نظام إدارة مدارس متكامل',
        category: 'تعليم',
        features: [
          'إدارة بيانات الطلاب والمعلمين',
          'نظام الدرجات والتقييم',
          'تتبع الحضور والغياب',
          'إدارة الجداول الدراسية',
          'التواصل مع أولياء الأمور',
          'إدارة الرسوم المدرسية',
          'تقارير الأداء الأكاديمي',
          'نظام المكتبة المدرسية',
          'إدارة النقل المدرسي',
          'تطبيق محمول لأولياء الأمور'
        ],
        specifications: {
          'عدد الطلاب': 'غير محدود',
          'المراحل الدراسية': 'جميع المراحل',
          'التقارير': '40+ تقرير تعليمي',
          'التطبيقات': 'ويب، موبايل، تابلت',
          'التواصل': 'SMS، إيميل، إشعارات',
          'اللغات': 'عربي، إنجليزي',
          'النسخ الاحتياطي': 'يومي آمن',
          'الدعم الفني': 'على مدار الساعة'
        },
        isActive: true,
        isFeatured: false,
        sortOrder: 7,
        seoTitle: 'نظام إدارة المدارس - كوربريت ستاك',
        seoDescription: 'نظام إدارة مدارس شامل للطلاب والمعلمين مع الدرجات والحضور والتواصل',
        seoKeywords: ['إدارة مدارس', 'تعليم', 'طلاب', 'معلمين', 'درجات']
      },
      {
        name: 'نظام إدارة المستشفيات',
        slug: 'hospital-management-system',
        description: 'نظام متكامل لإدارة المستشفيات والعيادات مع إدارة المرضى والمواعيد والملفات الطبية والفواتير',
        shortDescription: 'نظام إدارة مستشفيات وعيادات',
        category: 'طبي',
        features: [
          'إدارة ملفات المرضى الإلكترونية',
          'نظام المواعيد والحجوزات',
          'إدارة الأطباء والتخصصات',
          'نظام الفواتير الطبية',
          'إدارة الصيدلية والأدوية',
          'تقارير طبية شاملة',
          'نظام المختبرات والتحاليل',
          'إدارة غرف العمليات',
          'نظام التأمين الطبي',
          'تطبيق محمول للمرضى'
        ],
        specifications: {
          'عدد المرضى': 'غير محدود',
          'التخصصات': 'جميع التخصصات الطبية',
          'التقارير': '50+ تقرير طبي',
          'التكامل': 'أجهزة طبية، مختبرات',
          'الأمان': 'تشفير عالي للبيانات الطبية',
          'المعايير': 'متوافق مع المعايير الطبية',
          'النسخ الاحتياطي': 'آمن ومشفر',
          'الدعم': '24/7 للطوارئ'
        },
        isActive: true,
        isFeatured: false,
        sortOrder: 8,
        seoTitle: 'نظام إدارة المستشفيات - كوربريت ستاك',
        seoDescription: 'نظام إدارة مستشفيات متكامل للمرضى والأطباء مع الملفات الطبية والمواعيد',
        seoKeywords: ['إدارة مستشفيات', 'طبي', 'مرضى', 'أطباء', 'عيادات']
      }
    ]

    // حذف البيانات الموجودة وإضافة الجديدة
    await prisma.system.deleteMany()

    for (const systemData of systemsData) {
      await prisma.system.create({
        data: systemData
      })
    }

    await prisma.$disconnect()

    return NextResponse.json({
      success: true,
      message: `تم إضافة ${systemsData.length} أنظمة بنجاح`,
      count: systemsData.length
    })

  } catch (error) {
    console.error('Error seeding systems:', error)
    return NextResponse.json(
      { success: false, error: 'فشل في إضافة البيانات التجريبية' },
      { status: 500 }
    )
  }
}
