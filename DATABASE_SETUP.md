# ๐๏ธ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Corporate Stack

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุดุงููุฉ ููููุน Corporate Stack ูุน ุฌููุน ุงูุฌุฏุงูู ูุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุงููุทููุจุฉ ูุฑุจุท ููุญุฉ ุงูุชุญูู ุจุงููููุน ุงูุฑุฆูุณู.

## ๐ ุงููุชุทูุจุงุช

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ
- **Docker Desktop** (ุงูุทุฑููุฉ ุงูููุถูุฉ)
- **Node.js** (ุงูุฅุตุฏุงุฑ 18 ุฃู ุฃุญุฏุซ)
- **npm** ุฃู **yarn**

### ุงููุชุทูุจุงุช ุงูุจุฏููุฉ (ุจุฏูู Docker)
- **PostgreSQL** (ุงูุฅุตุฏุงุฑ 13 ุฃู ุฃุญุฏุซ)
- **Redis** (ุงุฎุชูุงุฑู ููุชุฎุฒูู ุงููุคูุช)

## ๐ ุงูุชุดุบูู ุงูุณุฑูุน

### ุงูุทุฑููุฉ ุงูุฃููู: ุงุณุชุฎุฏุงู Docker (ูููุตู ุจูุง)

#### 1. ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ ุงูุชููุงุฆู

**ููุธุงู Linux/macOS:**
```bash
chmod +x scripts/setup-database.sh
./scripts/setup-database.sh
```

**ููุธุงู Windows:**
```cmd
scripts\setup-database.bat
```

#### 2. ุงูุชุดุบูู ุงููุฏูู

```bash
# 1. ูุณุฎ ููู ุงูุจูุฆุฉ
cp .env.local.example .env.local

# 2. ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
cd database
docker-compose up -d

# 3. ุชุซุจูุช ุงูุชุจุนูุงุช
cd ..
npm install

# 4. ุฅุนุฏุงุฏ Prisma
npx prisma generate
npx prisma db push

# 5. ุชุดุบูู ุงูุชุทุจูู
npm run dev
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงูุชุซุจูุช ุงููุฏูู

#### 1. ุชุซุจูุช PostgreSQL

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
```

**macOS:**
```bash
brew install postgresql
brew services start postgresql
```

**Windows:**
ุชุญููู ูู [ุงููููุน ุงูุฑุณูู](https://www.postgresql.org/download/windows/)

#### 2. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
sudo -u postgres psql
CREATE DATABASE corporate_stack_db;
CREATE USER corporate_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE corporate_stack_db TO corporate_user;
\q
```

#### 3. ุชุดุบูู ููู SQL

```bash
psql -U postgres -d corporate_stack_db -f database/schema.sql
```

## ๐ง ุงูุฅุนุฏุงุฏุงุช

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูู ุจุชุญุฏูุซ ููู `.env.local` ุจุงูููู ุงูููุงุณุจุฉ:

```env
# Database
DATABASE_URL="postgresql://postgres:postgres123@localhost:5432/corporate_stack_db"

# Redis (ุงุฎุชูุงุฑู)
REDIS_URL="redis://:redis123@localhost:6379"

# JWT
JWT_SECRET="your-super-secret-jwt-key"

# Email (ุงุฎุชูุงุฑู)
SMTP_HOST=smtp.gmail.com
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
```

## ๐ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

| ุงูุฌุฏูู | ุงููุตู | ุนุฏุฏ ุงูุณุฌูุงุช |
|--------|--------|-------------|
| `users` | ุงููุณุชุฎุฏููู ูุงููุฏูุฑูู | 3 |
| `leads` | ุงูุนููุงุก ุงููุญุชูููู | 10 |
| `systems` | ุงูุฃูุธูุฉ ูุงูุฎุฏูุงุช | 5 |
| `quote_requests` | ุทูุจุงุช ุงูุนุฑูุถ | 5 |
| `responses` | ุงูุฑุฏูุฏ ูุงููุชุงุจุนุงุช | 2 |
| `system_settings` | ุฅุนุฏุงุฏุงุช ุงููุธุงู | 35+ |
| `daily_stats` | ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ | 7 |
| `activity_logs` | ุณุฌู ุงููุดุงุทุงุช | 4 |

### ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

#### ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถููู
```
ุงููุฏูุฑ ุงูุนุงู:
- ุงุณู ุงููุณุชุฎุฏู: admin
- ูููุฉ ุงููุฑูุฑ: admin123

ุงููุฏูุฑ:
- ุงุณู ุงููุณุชุฎุฏู: manager1
- ูููุฉ ุงููุฑูุฑ: manager123

ุงููุณุชุฎุฏู:
- ุงุณู ุงููุณุชุฎุฏู: user1
- ูููุฉ ุงููุฑูุฑ: user123
```

#### ุงูุนููุงุก ุงููุญุชูููู
- 10 ุดุฑูุงุช ูู ููุงุทู ูุฎุชููุฉ ูู ุงูุณุนูุฏูุฉ
- ุญุงูุงุช ูุชููุนุฉ: ุฌุฏูุฏุ ุชู ุงูุชูุงุตูุ ูุคููุ ุฅูุฎ
- ููุงุท ุฌูุฏุฉ ูู 55 ุฅูู 100

#### ุงูุฃูุธูุฉ
- ูุธุงู ุงููุญุงุณุจุฉ ูุงููุงุชูุฑุฉ ุงูุฅููุชุฑูููุฉ (15,000 ุฑูุงู)
- ูุธุงู ุฅุฏุงุฑุฉ ุงูุนููุงุก CRM (12,000 ุฑูุงู)
- ูุธุงู ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ (18,000 ุฑูุงู)
- ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู (10,000 ุฑูุงู)
- ูุธุงู ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน (8,000 ุฑูุงู)

## ๐ ุงูุฑุจุท ูุน ููุญุฉ ุงูุชุญูู

### APIs ุงููุชุงุญุฉ

#### ุงูุนููุงุก ุงููุญุชูููู
```
GET    /api/leads          # ุฌูุจ ุงูุนููุงุก ุงููุญุชูููู
POST   /api/leads          # ุฅุถุงูุฉ ุนููู ูุญุชูู
PUT    /api/leads          # ุชุญุฏูุซ ุนููู ูุญุชูู
DELETE /api/leads?id=...   # ุญุฐู ุนููู ูุญุชูู
```

#### ุงูุฃูุธูุฉ
```
GET    /api/systems        # ุฌูุจ ุงูุฃูุธูุฉ
POST   /api/systems        # ุฅุถุงูุฉ ูุธุงู
PUT    /api/systems        # ุชุญุฏูุซ ูุธุงู
DELETE /api/systems?id=... # ุญุฐู ูุธุงู
```

#### ุงูุชุญูููุงุช
```
GET /api/analytics?type=overview    # ูุธุฑุฉ ุนุงูุฉ
GET /api/analytics?type=leads       # ุชุญููู ุงูุนููุงุก
GET /api/analytics?type=systems     # ุชุญููู ุงูุฃูุธูุฉ
GET /api/analytics?type=regions     # ุชุญููู ุงูููุงุทู
GET /api/analytics?type=trends      # ุงูุงุชุฌุงูุงุช
```

#### ุงูุฅุนุฏุงุฏุงุช
```
GET  /api/settings                  # ุฌูุจ ุงูุฅุนุฏุงุฏุงุช
POST /api/settings                  # ุญูุธ ุฅุนุฏุงุฏ
PUT  /api/settings                  # ุชุญุฏูุซ ูุชุนุฏุฏ
```

### ุงุณุชุฎุฏุงู Prisma

```typescript
import prisma from '@/lib/database'

// ุฌูุจ ุงูุนููุงุก ุงููุญุชูููู
const leads = await prisma.lead.findMany({
  include: {
    assignedTo: true,
    quoteRequests: true
  }
})

// ุฅุถุงูุฉ ุนููู ูุญุชูู ุฌุฏูุฏ
const newLead = await prisma.lead.create({
  data: {
    companyName: 'ุดุฑูุฉ ุฌุฏูุฏุฉ',
    contactPerson: 'ุฃุญูุฏ ูุญูุฏ',
    email: 'ahmed@company.com',
    phone: '+966501234567'
  }
})
```

## ๐๏ธ ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ

### pgAdmin (ูุงุฌูุฉ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช)
- **ุงูุฑุงุจุท:** http://localhost:8080
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** admin@corporatestack.com
- **ูููุฉ ุงููุฑูุฑ:** admin123

### Prisma Studio
```bash
npx prisma studio
```
- **ุงูุฑุงุจุท:** http://localhost:5555

### ุฃูุงูุฑ ุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุจุฏุก ุงูุฎุฏูุงุช
./scripts/setup-database.sh start

# ุฅููุงู ุงูุฎุฏูุงุช
./scripts/setup-database.sh stop

# ุฅุนุงุฏุฉ ุชุดุบูู
./scripts/setup-database.sh restart

# ุนุฑุถ ุงูุณุฌูุงุช
./scripts/setup-database.sh logs

# ูุณุฎุฉ ุงุญุชูุงุทูุฉ
./scripts/setup-database.sh backup

# ุงุณุชุนุงุฏุฉ ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ
./scripts/setup-database.sh restore backup_file.sql

# ุชูุธูู ุงูุจูุงูุงุช
./scripts/setup-database.sh clean
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

#### 1. ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุชุญูู ูู ุชุดุบูู Docker
docker ps

# ุงูุชุญูู ูู ุณุฌูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
docker logs corporate_stack_db

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช
docker-compose restart
```

#### 2. ุฎุทุฃ ูู Prisma
```bash
# ุฅุนุงุฏุฉ ุชูููุฏ ุงูุนููู
npx prisma generate

# ุฅุนุงุฏุฉ ุฏูุน ุงููุฎุทุท
npx prisma db push

# ุฅุนุงุฏุฉ ุชุนููู ูุงุนุฏุฉ ุงูุจูุงูุงุช
npx prisma migrate reset
```

#### 3. ูุดุงูู ุงูุฃุฐููุงุช
```bash
# Linux/macOS
sudo chown -R $USER:$USER .
chmod +x scripts/setup-database.sh

# Windows (ุชุดุบูู ููุฏูุฑ)
# ุชุดุบูู PowerShell ุฃู CMD ููุฏูุฑ
```

### ุณุฌูุงุช ุงูุฃุฎุทุงุก

```bash
# ุณุฌูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
docker logs corporate_stack_db

# ุณุฌูุงุช ุงูุชุทุจูู
tail -f logs/app.log

# ุณุฌูุงุช Docker Compose
docker-compose logs -f
```

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณูู

### ุงูููุงุฑุณ
ุชู ุฅูุดุงุก ููุงุฑุณ ูุญุณูุฉ ุนูู:
- ุญุงูุฉ ุงูุนููุงุก ุงููุญุชูููู
- ุงูููุงุทู ูุงููุตุงุฏุฑ
- ุชูุงุฑูุฎ ุงูุฅูุดุงุก
- ูุนุฑูุงุช ุงููุณุชุฎุฏููู

### ุงูุชุฎุฒูู ุงููุคูุช
- Redis ููุชุฎุฒูู ุงููุคูุช (ุงุฎุชูุงุฑู)
- ุชุฎุฒูู ูุคูุช ููุงุณุชุนูุงูุงุช ุงููุชูุฑุฑุฉ
- ุชุฎุฒูู ูุคูุช ููุฅุนุฏุงุฏุงุช

### ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู
- ูุณุฎ ุงุญุชูุงุทูุฉ ููููุฉ
- ุงูุงุญุชูุงุธ ุจุงููุณุฎ ููุฏุฉ 30 ููู
- ุถุบุท ุงููููุงุช ูุชูููุฑ ุงููุณุงุญุฉ

## ๐ ุงูุฃูุงู

### ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ุงุณุชุฎุฏุงู bcrypt ูุน 12 rounds
- ุชุดููุฑ ููู ููุจูุงูุงุช ุงูุญุณุงุณุฉ

### ุญูุงูุฉ API
- ูุนุฏู ูุญุฏูุฏ ููุทูุจุงุช
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุณุฌู ุดุงูู ูููุดุงุทุงุช

### ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุขูู
- ุชุดููุฑ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- ุชุฎุฒูู ุขูู ูููููุงุช
- ุงูุชุญูู ูู ุณูุงูุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฏุนู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** support@corporatestack.com
- **ุงููุซุงุฆู:** [ุฑุงุจุท ุงููุซุงุฆู]
- **ุงููุฌุชูุน:** [ุฑุงุจุท ุงููุฌุชูุน]

---

โ **ุชู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!**

ููููู ุงูุขู ุชุดุบูู ุงูุชุทุจูู ูุงููุตูู ุฅูู ููุญุฉ ุงูุชุญูู ุนูู:
**http://localhost:3000/admin**
